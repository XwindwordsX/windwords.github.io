<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>windwords&#39; Blog</title>
  
  
  <link href="https://blog.windwords.me/atom.xml" rel="self"/>
  
  <link href="https://blog.windwords.me/"/>
  <updated>2021-09-14T07:09:42.609Z</updated>
  <id>https://blog.windwords.me/</id>
  
  <author>
    <name>windwords</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Vercel和CloudFlare互斥</title>
    <link href="https://blog.windwords.me/2021/09/vercel-and-cloudflare/"/>
    <id>https://blog.windwords.me/2021/09/vercel-and-cloudflare/</id>
    <published>2021-09-14T02:51:05.000Z</published>
    <updated>2021-09-14T07:09:42.609Z</updated>
    
    <content type="html"><![CDATA[<p>我警告你们，用<a href="https://vercel.com">Vercel</a>部署博客千万不要和<a href="https://cloudflare.com">CloudFlare</a>一起用！！！尤其不要开启<a href="https://cloudflare.com">CloudFlare</a>的Proxy！！！老子要升天了！！！日妈批！！！</p><p>（<a href="https://twitter.com/mariotaku/status/496733277274013696">H λ L F - D E λ D梗</a>）</p><span id="more"></span><hr><h2 id="事情是如何发生的"><a href="#事情是如何发生的" class="headerlink" title="事情是如何发生的"></a>事情是如何发生的</h2><p>自从用Vercel自动部署博客开始，一直收到这样的邮件：</p><blockquote><p>From : <a href="mailto:system@vercel.com">system@vercel.com</a></p><p>To : <a href="mailto:system@vercel.com">system@vercel.com</a></p><p>Subject : Your domain blog.windwords.me needs to be configured</p><p>======</p><p><strong>Invalid Domain Configuration</strong></p><p>Hi windwords,You have added the Domain blog.windwords.me to the Project <a href="https://vercel.com/windwords/windwords-github-io">windwords-github-io</a> on <a href="https://vercel.com/">Vercel</a> but it needs to be configured.</p><p>To configure the Domain, set the following record on your DNS provider (recommended):</p><blockquote><p><code>name type  value</code></p><p><code>blog CNAME cname.vercel-dns.com</code></p></blockquote><p>Alternatively, you can also change your Domain’s nameservers to the following intended set:</p><blockquote><p><code>ns1.vercel-dns.com</code></p><p><code>ns2.vercel-dns.com</code></p></blockquote><p>We will periodically check your Domain and notify you when we detect a change.</p><p>If you do not want to receive reminders about updating the configuration of your Domain, you can remove it from <a href="https://vercel.com/windwords/windwords-github-io/domains">your Project</a>.</p><p>Thank you.</p><hr><p>Vercel Inc. - <a href="https://vercel.com/">vercel.com</a></p><p>If you’d like to talk to a Support Team member, simply reply to this email.</p></blockquote><p>邮件里说我未设置CNAME记录，但是既然能访问，我显然是设置了的。</p><p>于是我去信询问为何一直这样报错（无视我的垃圾英语水平 &gt;_&lt;）：</p><blockquote><p>From : windwords001@icloud.com</p><p>To : <a href="mailto:support@vercel.com">support@vercel.com</a></p><p>Subject : Re: Your domain blog.windwords.me needs to be configured</p><p>======</p><p>I have received such emails time and time again, but my DNS has been set up:</p><blockquote><p><code>blog CNAME cname.vercel-dns.com</code></p><p><code>www CNAME cname.vercel-dns.com</code></p></blockquote><p>How to eliminate or turn off this prompt?</p><p>Sincerely,</p><p>windwords</p></blockquote><hr><h2 id="Vercel的回应"><a href="#Vercel的回应" class="headerlink" title="Vercel的回应"></a>Vercel的回应</h2><p>过了一天左右，收到了这样的回复：</p><blockquote><p>From : <a href="mailto:support@vercel.com">support@vercel.com</a></p><p>To : windwords001@icloud.com</p><p>Subject : RE: Re: Your domain blog.windwords.me needs to be configured</p><p>======</p><p>Hi there,</p><p>Thank you for getting in touch, I’m sorry to hear you’re having difficulty using the Vercel platform.</p><p>It appears your domain may be using Cloudflare with the proxy option enabled, this is likely the root cause of the issue you are facing.</p><p>At Vercel, we support this configuration without any issues, but you may need an additional configuration. Please read this <a href="https://vercel.com/knowledge/using-cloudflare-with-vercel">support article</a> for more information.</p><p>If you are facing difficulties configuring Cloudflare, we recommend that you reach out to their support channel.</p><p>William</p></blockquote><p>根据邮件的指引看了下支持文档，其中说不能使用CloudFlare的Proxy功能，应设置为仅DNS（支持文档过长，这里只截取需要部分，其余用<code>(* * *)</code>代替）：</p><blockquote><p><strong>How do I use a CloudFlare domain with Vercel?</strong></p><p>If your domain is using Cloudflare’s Nameservers and you plan to use it as a <a href="https://vercel.com/docs/v2/custom-domains">custom domains</a> on your project, you may need some minor steps to ensure the domain will work correctly.</p><blockquote><p><strong>Without Proxy</strong></p><p><code>(* * *)</code></p><p><strong>With Proxy</strong></p><p>A Cloudflare proxy works as an intermediary between your domain and Vercel, which is the hosting provider. <strong>We don’t recommend that you enable the Cloudflare proxy unless you have specific constraints for your project since it will introduce a minor performance penalty to your website due to the additional hop.</strong> You need to insert a CNAME record with the value <code>cname.vercel-dns.com</code>or an A record with the value <code>76.76.21.21</code>.</p><p>It is <strong>highly recommended</strong> that you don’t use the Cloudflare CDN with Vercel. When new deployments are created, the Vercel platform is unable to purge the content cached on Cloudflare. If your visitors load a cached <code>/index.html</code> requiring <code>/static/script-abc.js</code>, but this file is missing both in the new deployment and the Cloudflare CDN, the website will break. Therefore, turning off the Cloudflare CDN for pages is recommended to avoid any breakage. Please refer to the <a href="https://support.cloudflare.com/hc/en-us/articles/202775670-Customizing-Cloudflare-s-cache">Cloudflare documentation</a> for further information.</p><p><code>(* * *)</code></p></blockquote><p><code>(* * *)</code></p></blockquote><p>可以看出，Vercel和CloudFlare互斥，同时使用Vercel和CloudFlare会导致网站减速。Vercel甚至强烈不建议使用CloudFlare的CDN，因为这有可能导致网站出现问题。</p><hr><h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><p>知道问题就好解决了。关闭CloudFlare的Proxy功能即可：</p><p><img src="https://i.loli.net/2021/09/14/roKv5Z1DJizI3E2.png" alt=""></p><p>如果这样仍无法解决，那么也许你应该尝试彻底关闭CloudFlare的CDN功能或更换DNS服务商。</p><p>====== End ======</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;我警告你们，用&lt;a href=&quot;https://vercel.com&quot;&gt;Vercel&lt;/a&gt;部署博客千万不要和&lt;a href=&quot;https://cloudflare.com&quot;&gt;CloudFlare&lt;/a&gt;一起用！！！尤其不要开启&lt;a href=&quot;https://cloudflare.com&quot;&gt;CloudFlare&lt;/a&gt;的Proxy！！！老子要升天了！！！日妈批！！！&lt;/p&gt;
&lt;p&gt;（&lt;a href=&quot;https://twitter.com/mariotaku/status/496733277274013696&quot;&gt;H λ L F - D E λ D梗&lt;/a&gt;）&lt;/p&gt;</summary>
    
    
    
    <category term="信笔涂鸦" scheme="https://blog.windwords.me/categories/%E4%BF%A1%E7%AC%94%E6%B6%82%E9%B8%A6/"/>
    
    
    <category term="网络" scheme="https://blog.windwords.me/tags/%E7%BD%91%E7%BB%9C/"/>
    
    <category term="吐槽" scheme="https://blog.windwords.me/tags/%E5%90%90%E6%A7%BD/"/>
    
  </entry>
  
  <entry>
    <title>为Hexo网志添加MathJax渲染功能</title>
    <link href="https://blog.windwords.me/2021/08/add-mathjax-rendering-function/"/>
    <id>https://blog.windwords.me/2021/08/add-mathjax-rendering-function/</id>
    <published>2021-08-30T07:22:58.000Z</published>
    <updated>2021-08-31T11:23:47.000Z</updated>
    
    <content type="html"><![CDATA[<p>说起来这样的文章应该一抓一大把，不喜勿喷。 :P</p><p>咱的网志之前一直没有数学公式的渲染功能，现在搞好了写个文章记录一下。OwO</p><span id="more"></span><hr><h3 id="更换渲染引擎"><a href="#更换渲染引擎" class="headerlink" title="更换渲染引擎"></a>更换渲染引擎</h3><p>Hexo内建的渲染引擎<code>hexo-renderer-marked</code>比较菜，所以我们得换成<code>hexo-renderer-kramed</code>以支持MathJax渲染功能。</p><p>先卸载<code>hexo-renderer-marked</code>：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm uninstall hexo-renderer-marked --save</span><br></pre></td></tr></table></figure><p>然后安装<code>hexo-renderer-kramed</code>：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install hexo-renderer-mathjax --save</span><br></pre></td></tr></table></figure><p>更换引擎后，您应该执行一次<code>hexo clean</code>，再重新生成页面来使引擎生效。</p><hr><h3 id="安装并开启MathJax渲染功能"><a href="#安装并开启MathJax渲染功能" class="headerlink" title="安装并开启MathJax渲染功能"></a>安装并开启MathJax渲染功能</h3><p>接着，我们需要安装MathJax渲染插件：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install hexo-renderer-mathjax --save</span><br></pre></td></tr></table></figure><p>p.s.: 如果你之前安装过类似<code>hexo-math</code>的渲染插件的话，那么你应该先卸载它。</p><p>然后开启你主题的MathJax渲染功能，这里以我所使用的主题NexT为例：</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Math Formulas Render Support</span></span><br><span class="line"><span class="attr">math:</span></span><br><span class="line">  <span class="comment"># Default (true) will load mathjax / katex script on demand.</span></span><br><span class="line">  <span class="comment"># That is it only render those page which has `mathjax: true` in Front-matter.</span></span><br><span class="line">  <span class="comment"># If you set it to false, it will load mathjax / katex srcipt EVERY PAGE.</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># hexo-renderer-pandoc (or hexo-renderer-kramed) required for full MathJax support.</span></span><br><span class="line">  <span class="attr">mathjax:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># See: https://mhchem.github.io/MathJax-mhchem/</span></span><br><span class="line">    <span class="attr">mhchem:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p><code>mhchem</code>这个东西是渲染化学公式的，如果不需要可以不开。上面的<code>per_page</code>是设置是否每页都启用MathJax，设为<code>true</code>需要在使用数学公式的页面配置项中加入一条<code>mathjax: true</code>，如果设为<code>false</code>，那么是每页启用MathJax，这里我设为<code>true</code>来让它加载更快点。</p><hr><h3 id="在文章中启用MathJax"><a href="#在文章中启用MathJax" class="headerlink" title="在文章中启用MathJax"></a>在文章中启用MathJax</h3><p>你需要在你的文章配置项中加入<code>mathjax: true</code>来启用MathJax渲染功能（如果你把<code>per_page</code>设为<code>false</code>，那么可以跳过这一步）：</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">title:</span> <span class="string">为Hexo网志添加MathJax渲染功能</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2021-08-30 15:22:58</span></span><br><span class="line"><span class="attr">tags:</span> <span class="string">技术</span></span><br><span class="line"><span class="attr">cagetories:</span> <span class="string">笔记</span></span><br><span class="line"><span class="attr">mathjax:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>一切都完成了。测试下你的MathJax吧～</p><script type="math/tex; mode=display">e=mc^2</script><p>====== End ======</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;说起来这样的文章应该一抓一大把，不喜勿喷。 :P&lt;/p&gt;
&lt;p&gt;咱的网志之前一直没有数学公式的渲染功能，现在搞好了写个文章记录一下。OwO&lt;/p&gt;</summary>
    
    
    
    <category term="笔记" scheme="https://blog.windwords.me/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="技术" scheme="https://blog.windwords.me/tags/%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>不再备案｜NO MORE ICP BEIAN</title>
    <link href="https://blog.windwords.me/2021/08/no-more-icp-beian/"/>
    <id>https://blog.windwords.me/2021/08/no-more-icp-beian/</id>
    <published>2021-08-26T09:32:07.000Z</published>
    <updated>2021-09-14T07:00:11.609Z</updated>
    
    <content type="html"><![CDATA[<p>在天朝的互联网络中，有个很奇怪的制度，叫做<a href="http://www.gov.cn/gongbao/content/2005/content_93018.htm">ICP备案</a>，这项制度自从出生起，便广受争议。</p><span id="more"></span><hr><h2 id="ICP备案简介"><a href="#ICP备案简介" class="headerlink" title="ICP备案简介"></a>ICP备案简介</h2><p>在说我的观点之前，咱们先来了解一下<a href="http://www.gov.cn/gongbao/content/2005/content_93018.htm">ICP备案</a>是个什么东西。</p><p>这是天朝政府从2005年1月28日开始实行的政策，根据天朝政府的说法，制定这个政策是<strong>为规范非经营性互联网信息服务备案及备案管理，促进互联网信息服务业的健康发展</strong>。</p><p>注意：这里的非经营性不代表网站不赚钱，而是是否有偿提供信息。</p><hr><h2 id="朝廷的意见"><a href="#朝廷的意见" class="headerlink" title="朝廷的意见"></a>朝廷的意见</h2><p>可以看出来，朝廷的本意似乎是好的。「促进互联网信息服务业的健康发展」嘛。</p><p>真的吗？让我们往下看。诶，似乎有地方不太对？</p><blockquote><p><strong>第五条</strong> 在中华人民共和国境内提供非经营性互联网信息服务，应当依法履行备案手续。<br>未经备案，<strong>不得在中华人民共和国境内从事非经营性互联网信息服务</strong>。</p><p><strong>第二十二条</strong> 违反本办法第五条的规定，未履行备案手续提供非经营性互联网信息服务的，由住所所在地省通信管理局责令限期改正，<strong>并处1万元罚款</strong>；拒不改正的，<strong>关闭网站</strong>。</p></blockquote><p>可以看出，朝廷要求的备案，是<strong>强制</strong>的。如果你不愿意搞一堆麻烦事，顺便泄漏自己的隐私（政府的办事效率和对个人的隐私保护有多烂相信大家是知道滴），那么你的网站将有可能被<strong>罚款停运</strong>。</p><p>另外，这个法律法规面向的群体是「所有人」，也就是说，个人用户一样要求备案。</p><hr><h2 id="我反对强制备案"><a href="#我反对强制备案" class="headerlink" title="我反对强制备案"></a>我反对强制备案</h2><p>朝廷的文件中写了：「<strong>在中华人民共和国境内提供非经营性互联网信息服务，履行备案手续，实施备案管理，适用本办法</strong>」。这意味着，所有人（包括个人）都要进行备案。</p><p>企业/组织在中国境内提供非经营性互联网信息服务，那么理应备案防搞事没错，但是众多个人站长最多做个博客，一介草民能搞什么事，把朝廷推翻了不成？大多数网友还是很胆怯的，也不是有人提出个游行示威，几千人就跟着上了。</p><hr><h2 id="其他影响备案的因素"><a href="#其他影响备案的因素" class="headerlink" title="其他影响备案的因素"></a>其他影响备案的因素</h2><p>如果一定要强制备案，那么理应提高工作效率，以方便群众。况且朝廷这份文件可白纸黑字的写着：</p><blockquote><p><strong>第四条</strong> 省通信管理局在备案管理中应当遵循公开、公平、公正的原则，提供便民、优质、<strong>高效</strong>的服务。</p></blockquote><p>如今，2021年，朝廷的备案工作效率仍然毫无改善。</p><p>我们这里拿一份<a href="https://cloud.tencent.com/document/product/243/18909">腾讯云的备案流程文档</a>来做说明，挑出其中占用时间最长的步骤：</p><blockquote><p><strong>管局审核</strong><br>根据《非经营性互联网信息服务备案管理办法》，管局审核时长<strong>不超过20个工作日</strong>。</p></blockquote><p>往往，管局的审核，需要一周半至两周的时间。这么长时间，<del>等的我黄花菜都凉了</del>，<del>给管局倒一杯卡布其诺</del>。</p><p>不是还天天说<a href="http://theory.people.com.cn/n1/2020/0121/c40531-31557829.html">创新行政方式，提高行政效能，建设人民满意的服务型政府</a>吗？这备案速度咋这么慢捏？</p><p>此外，天朝政府在2018年1月1日发布的《<a href="http://www.cac.gov.cn/2017-11/30/c_1122037113.htm">工业和信息化部关于规范互联网信息服务使用域名的通知</a>》中一棒子敲死了通过境外注册商注册的域名进行备案。</p><p>其公布的<a href="http://xn--fiq8ituh5mn9d1qbc28lu5dusc.xn--vuq861b/">中国互联网域名体系</a>中更是减少了大量域名后缀，意味着这些后缀将再无可能进行备案（如果通过工信部批复倒可以，但是天朝什么尿性大家清楚），进一步为备案设阻。</p><hr><h2 id="我的一些改进建议"><a href="#我的一些改进建议" class="headerlink" title="我的一些改进建议"></a>我的一些改进建议</h2><p>对于个人网站，可改为申报而非备案，类似于先发后审，对企业/组织可强制要求备案，个人只需填写一张申报表格，简化工作流程。</p><p>应允许更多域名进行备案，简化流程后相信更多人不会再抗拒备案，或者敢怒不敢言。而且这样亦可提升人民主动备案的几率。</p><p>天朝在进行备案的时候需要域名所有者临时关闭WHOIS隐私保护，这可能导致隐私泄漏，可否通过其他方式（如提供账单、设置TXT记录或公证处证明等）进行域名所有者确认？</p><hr><h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>互联网不是恐怖的洪水猛兽，它之所以被称为互联网，就是因为它互联、开放的特质。毋庸置疑的是，世界亦是在走向联合、走向开放。我们不应逆流而行开倒车，而更是应该使用一种开放、包容的心态去面对它。</p><p>====== END ======</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;在天朝的互联网络中，有个很奇怪的制度，叫做&lt;a href=&quot;http://www.gov.cn/gongbao/content/2005/content_93018.htm&quot;&gt;ICP备案&lt;/a&gt;，这项制度自从出生起，便广受争议。&lt;/p&gt;</summary>
    
    
    
    <category term="信笔涂鸦" scheme="https://blog.windwords.me/categories/%E4%BF%A1%E7%AC%94%E6%B6%82%E9%B8%A6/"/>
    
    
    <category term="ICP备案" scheme="https://blog.windwords.me/tags/ICP%E5%A4%87%E6%A1%88/"/>
    
    <category term="网络" scheme="https://blog.windwords.me/tags/%E7%BD%91%E7%BB%9C/"/>
    
    <category term="天朝" scheme="https://blog.windwords.me/tags/%E5%A4%A9%E6%9C%9D/"/>
    
    <category term="吐槽" scheme="https://blog.windwords.me/tags/%E5%90%90%E6%A7%BD/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://blog.windwords.me/1970/01/hello-world/"/>
    <id>https://blog.windwords.me/1970/01/hello-world/</id>
    <published>1969-12-31T16:00:00.000Z</published>
    <updated>2021-09-04T15:42:04.000Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><span id="more"></span><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;</summary>
    
    
    
    
  </entry>
  
</feed>
